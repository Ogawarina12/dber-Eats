<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dber Eats - åº—èˆ—ç®¡ç†ç”»é¢</title>
    <style>
        body { font-family: sans-serif; background: #333; color: white; padding: 20px; }
        h1 { border-bottom: 2px solid #555; padding-bottom: 10px; }
        
        .order-card {
            background: white;
            color: #333;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .order-info { font-size: 0.9rem; }
        .order-info strong { font-size: 1.2rem; color: #06C167; }
        .location { background: #eee; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
        .payment { color: #f0ad4e; font-weight: bold; }
        
        .action-btn {
            background: #06C167; color: white; border: none; padding: 10px 20px;
            border-radius: 5px; cursor: pointer; font-size: 1rem;
        }
        .action-btn:hover { opacity: 0.9; }
        .delete-btn { background: #d9534f; margin-left: 10px; }
        
        .empty-msg { color: #ccc; text-align: center; margin-top: 50px; }
    </style>
</head>
<body>

<h1>dber Eats - å¨æˆ¿ãƒ»é…é”ç®¡ç†</h1>
<div id="order-container">
    <div class="empty-msg">ç¾åœ¨ã€æœªå‡¦ç†ã®æ³¨æ–‡ã¯ã‚ã‚Šã¾ã›ã‚“...</div>
</div>

<script>
    // 5ç§’ã”ã¨ã«æ³¨æ–‡ã‚’ç¢ºèªã™ã‚‹ï¼ˆãƒãƒ¼ãƒªãƒ³ã‚°ï¼‰
    setInterval(loadOrders, 2000);

    function loadOrders() {
        const container = document.getElementById('order-container');
        const orders = JSON.parse(localStorage.getItem('dber_orders') || '[]');

        if (orders.length === 0) {
            container.innerHTML = '<div class="empty-msg">ç¾åœ¨ã€æœªå‡¦ç†ã®æ³¨æ–‡ã¯ã‚ã‚Šã¾ã›ã‚“...</div>';
            return;
        }

        // ç”»é¢ã‚’å†æç”»ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ã«ã™ã‚‹ãŸã‚æ¯å›ã‚¯ãƒªã‚¢ã—ã¦ç”Ÿæˆï¼‰
        container.innerHTML = '';
        
        // æ–°ã—ã„é †ã«è¡¨ç¤º
        orders.reverse().forEach(order => {
            const card = document.createElement('div');
            card.className = 'order-card';
            card.innerHTML = `
                <div class="order-info">
                    <strong>æ³¨æ–‡ID: ${order.id.toString().slice(-4)}</strong> <br>
                    ğŸ•’ æ™‚é–“: ${order.time} <br>
                    ğŸ“ å ´æ‰€: <span class="location">${order.location}</span> <br>
                    ğŸ‘¤ å­¦ç±: ${order.studentId} <br>
                    ğŸ± å†…å®¹: ${order.items} <br>
                    ğŸ’° åˆè¨ˆ: Â¥${order.total} (<span class="payment">${order.payment}</span>)
                </div>
                <div>
                    <button class="action-btn" onclick="completeOrder(${order.id})">é…é”å®Œäº†</button>
                </div>
            `;
            container.appendChild(card);
        });
    }

    function completeOrder(id) {
        if(!confirm('ã“ã®æ³¨æ–‡ã‚’ã€Œå®Œäº†ã€ã«ã—ã¦ä¸€è¦§ã‹ã‚‰æ¶ˆã—ã¾ã™ã‹ï¼Ÿ')) return;

        let orders = JSON.parse(localStorage.getItem('dber_orders') || '[]');
        // è©²å½“IDã‚’å‰Šé™¤
        orders = orders.filter(o => o.id !== id);
        // ä¿å­˜ã—ç›´ã™
        localStorage.setItem('dber_orders', JSON.stringify(orders));
        
        loadOrders(); // ç”»é¢æ›´æ–°
    }
    
    // åˆå›èª­ã¿è¾¼ã¿
    loadOrders();
</script>

</body>
</html>
